<!DOCTYPE html>
<html class="standalone">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<meta name="apple-mobile-web-app-title" content="">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="msapplication-TileColor" content="#795548">
	<meta name="theme-color" content="#ffffff">
	<link rel="icon" type="image/png" sizes="32x32" href="./icon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="./icon-16x16.png">
	<meta property="og:url" content="https://api.internetcollaboratif.info">
	<meta itemprop="name" content="t6 IoT">
	<title>t6 IoT</title>
	<link rel="stylesheet" href="./t6app.min.css" type="text/css" data-integrity="" data-crossorigin="anonymous">
	<link rel="stylesheet" href="./object.css" type="text/css" data-integrity="" data-crossorigin="anonymous">
	<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
	<script type="application/javascript" src="./t6show-min.js"></script>
</head>
<body>
<div id="app"></div>
<script type="text/javascript">
let ui = {};

document.onreadystatechange = function () {
	/*	
	document.getElementById("app").innerHTML = materializeLight(ui);
	componentHandler.upgradeDom();
	actionate();
	*/
	fetch("./ui.json")
		.then((response) => response.json())
		.then((ui) => {
			document.getElementById("app").innerHTML = materializeLight(ui);
			componentHandler.upgradeDom();
			actionate();
			fetch("/getValues?pin=0,1,2,3,4,5,6,7,8,9")
				.then((res) => res.json())
				.then((values) => {
					if(typeof values.pins!=="undefined" && values.pins.length>-1) {
						(values.pins).map(function(pin, index) {
							if(pin[Object.keys(pin)].value === "1" && document.getElementById(Object.keys(pin))) {
								document.getElementById(Object.keys(pin)).parentElement.MaterialSwitch.on();
							} else if(pin[Object.keys(pin)].value === "0" && document.getElementById(Object.keys(pin))) {
								document.getElementById(Object.keys(pin)).parentElement.MaterialSwitch.off();
							}
							document.getElementById(Object.keys(pin)).parentElement.querySelector(".mdl-switch__label .mode").textContent = pin[Object.keys(pin)].mode;
							document.getElementById(Object.keys(pin)).parentElement.querySelector(".mdl-switch__label .type").textContent = pin[Object.keys(pin)].type;
							document.getElementById(Object.keys(pin)).parentElement.querySelector(".mdl-switch__label .value").textContent = pin[Object.keys(pin)].value;
						});
					}
					});
		}); //then
}
window.onload = function() {}
</script>
</body>
</html>